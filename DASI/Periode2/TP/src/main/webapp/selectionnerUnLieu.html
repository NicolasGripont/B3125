<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="style.css" />
        <link rel="stylesheet" href="js/jquery-ui.css" />
        <title>Collect'IF</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui.js">//uniquement datepicker</script> 
        <script type="text/javascript" src="script.js"></script>
        
        <script>
		var map;
                var myLatLng;
		/**
		 * Initialisation du script Google Maps
		*/
		function _init()
		{
                    // Insertion du script Google Maps + Création map
                    var script = document.createElement("script");
                    script.type = "text/javascript";
                    script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyBQhROXNGtRsvRaDvDQeax-Q5S33-U2yKQ&sensor=false&callback=_initMap";
                    document.body.appendChild(script);
		}

		/**
		 * Initialisation de la map
		*/
		function _initMap()
		{	
                    // Options de la map
                    myLatLng = new google.maps.LatLng(45.781863, 4.887115);
                    var mapOptions = {
                            zoom: 12,
                            center: myLatLng,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                    };

                    map = new google.maps.Map(document.getElementById('map'), mapOptions);
                    var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
                    var marker = new google.maps.Marker({
                      position: myLatLng,
                      map: map,
                          icon: iconBase + 'play_maps.png'
                    });

                    marker.tooltipContent = 'this content should go inside the tooltip';
                    var infoWindow = new google.maps.InfoWindow({
                        content: 'This is an info window'
                    });
                    google.maps.event.addListener(marker, 'mouseover', function () {
                        infoWindow.open(map, marker);
                    });
                    google.maps.event.addListener(marker, 'mouseout', function () {
                        infoWindow.close(map, marker);
                    });
		}
                
                
                $(document).ready(function() {
                    _init();
                    loadNomsLieux();
                    document.getElementById("selectLieu").addEventListener("change", addActivityItem, false);
                });
                
                
                      
      

                function addActivityItem(){
                      //option is selected
                    $.ajax({
                        url: './ActionServlet',
                        type: 'POST',
                        data: { 
                            action: 'getNomsActivites'
                        },
                        dataType: 'json'
                    })
                    .done(function(data) {
                        var nomsActivites = data.nomsActivites;
                        var contenuHtml = '<option selected>Activité</option>';
                        var i;

                        for (i = 0; i < nomsActivites.length; i++) {
                            var activite = nomsActivites[i];
                            contenuHtml += "<option value='";
                            contenuHtml += activite.nom;
                            contenuHtml += "'>";
                            contenuHtml += activite.nom;
                            contenuHtml += "</option>" ;
                        }
                        $('#ActivitesSelect').html(contenuHtml);
                    })
                    .fail(function() {
                        $('#ActivitesSelect').html('<option>ERREUR de chargement</option>');
                    })
                    .always(function() {
                        //
                    });
                }

                function loadNomsLieux() {
                    $.ajax({
                        url: './ActionServlet',
                        type: 'POST',
                        data: { 
                            action: 'getNomsLieux'
                        },
                        dataType: 'json'
                    })
                    .done(function(data) {
                        var nomsLieux = data.nomsLieux;
                        var contenuHtml = '<option selected>Lieu</option>';
                        var i;

                        for (i = 0; i < nomsLieux.length; i++) {
                            var nomLieu = nomsLieux[i];
                            contenuHtml += "<option value='";
                            contenuHtml += nomLieu.nomLieu;
                            contenuHtml += "'>";
                            contenuHtml += nomLieu.nomLieu;
                            contenuHtml += "</option>" ;
                        }
                        $('#selectLieu').html(contenuHtml);
                    })
                    .fail(function() {
                        $('#selectLieu').html('<option>ERREUR de chargement</option>');
                    })
                    .always(function() {
                        //
                    });
                }



		</script>
            

        
       
    </head>



    <body>
        <table class="global" >
            <tbody>
                <tr>
                    <td class="panel">
                        <section class="panel">
                             <header>
                                 <a href="javascript:window.location.reload(true)">
                                    <h1>Collect'IF</h1>
                                </a>
                            </header>
                            
                                

                            <div id="btn_top" class="btn_top" style="">
                                <a href="#">
                                    <img src="images/arrowtop.png" alt="logo">
                                </a>
                            </div>
                        </section>
                    </td>

<!-- corps -->

                    <td>
                        <table class="corps">
                           <tr>
                                <td>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <br/>
                                    <table class="select_lieu">
                                        <tr>
                                            <td>
                                                <div id="map" style="width: 100%; height: 500px;"></div>
                                            </td>
                                            <td>
                                                <div class="select_lieu">
                                                    <h1>
                                                        Activité :
                                                    </h1>
                                                    <p>
                                                        Football
                                                    </p>
                                                    <br/>
                                                    <h1>
                                                        Date :
                                                    </h1>
                                                    <p>
                                                        04/06/2016
                                                    </p>
                                                    <br/>
                                                    <h1>
                                                        Lieu :
                                                    </h1>
                                                    <select class="select_style" name="selectLieu" id="selectLieu">
                                                        
                                                    </select>
                                                    <br/>
                                                    <br/>
                                                    <br/>
                                                    <input type="submit" value="Valider"/>
                                                    <br/>
                                                    <br/>
                                                    <br/>
                                                </div>
                                            </td >
                                        </tr>
                                    </table>
                                </td>
                            </tr> 
   


    <!-- menu adherent -->
                             
                            
                        </table>
                        <br/>   
                        <br/>
                        <br/>   
                        <br/>
                        <br/>   
                        <br/>
                        <br/>   
                        <br/>
                     </td>               

<!-- footer -->   
                </tr>
                <tr>
                    <td colspan="2">
                        <footer>
                            <div>
                                <p>
                                    Copyright Nicolas GRIPONT &amp; Rim EL IDRISSI MOKDAD - Tous droits réservés
                                </p>
                            </div>            
                        </footer>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>

